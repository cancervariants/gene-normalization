services:
  api:
    image: cancervariants/gene-normalizer-api:latest
    environment:
      SEQREPO_ROOT_DIR: /usr/local/share/seqrepo/2024-12-20
      AWS_ACCESS_KEY_ID: 'DUMMYIDEXAMPLE'
      AWS_SECRET_ACCESS_KEY: 'DUMMYEXAMPLEKEY'
      AWS_DEFAULT_REGION: 'us-east-2'
      GENE_NORM_DB_URL: http://dynamodb-local:8000

    ports:
      - "8001:80"

    volumes:
      - /usr/local/share/seqrepo:/usr/local/share/seqrepo
    depends_on:
      # seqrepo:
      #   condition: service_started
      dynamodb-local:
        condition: service_started

  # seqrepo:
  #   image: biocommons/seqrepo:2024-12-20
  #   volumes:
  #     - seqrepo_vol:/usr/local/share/seqrepo

  dynamodb-local:
    image: cancervariants/gene-normalizer-ddb:latest
    ports:
     - "8000:8000"
